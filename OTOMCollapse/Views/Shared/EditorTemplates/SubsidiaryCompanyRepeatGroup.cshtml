@model IList<OTOMCollapse.Models.RepeatGroups.SubsidiaryRepeatGroup>

@{
    string propertyName = (string)ViewData["PropertyName"];
    int? maxValue = null ;
    if (ViewData.ContainsKey("MaxRepeats"))
    {maxValue = (int)ViewData["MaxRepeats"];}
    bool indexPresent =  ViewData.ContainsKey("Index");
}

@Html.BeginListSection()

    @for (int i = 0; i < Model.Count; i++)
    {

        Html.SetHtmlTemplateInfo(i);

        <article>
            <div class="editor-label">
                @Html.LabelFor(model => model[i].CompanyName)
            </div>
            <div class="editor-field">
                @*@Html.EditorFor(model => model[i].CompanyName)*@
                @Html.Editor("CompanyName")
            </div>
        </article>

        <article>
            <div class="editor-label">
                @Html.LabelFor(model => model[i].EmployersReferenceNumber)
            </div>
            <div class="editor-field">
                @*@Html.EditorFor(model => model[i].EmployersReferenceNumber)*@
                @*@Html.EditorFor(model => model[i].EmployersReferenceNumber)*@
                @Html.Editor("EmployersReferenceNumber")@*,templateInfo)*@
                @Html.ValidationMessage("EmployersReferenceNumber")
                @*@Html.ValidationMessageFor(model => model[i].EmployersReferenceNumber)*@
            </div>
        </article>
        
        //@Html.Editor("AddressInformation",)
        @*@Html.EditorFor(model => model[i].AddressInformation,"Address","")*@
        @Html.EditorFor(model => model[i].AddressInformation,"","")
        
        @*@Html.RenderGenericPartialFor(@"Partial\_PartialGenericRepeatGroupListStyle", Model,model => model[i].) @*, model => model.TestRepeatGroups)*@
        
        
        @ViewData.Remove("Index");
        @ViewData.Remove("PropertyName");
        @ViewData.Remove("MaxRepeats");
            
        
        @Html.NestedEditorFor(model => model[i].TestRepeatGroups,"","")

    }

    @Html.EndListSection()
@Html.RenderAddMoreButton(propertyName,maxValue,indexPresent)
    @*
    <article>
        <div class="editor-label">
           @Html.LabelFor(model => model.TestRepeatGroups)*@
    @*</div>
    <div class="editor-field">
       
    </div>*@

    @*@Html.RenderGenericPartialFor(@"Partial\_PartialGenericRepeatGroupListStyle", Model)@*, model => model.TestRepeatGroups)*@
    @*@Html.RenderAddMoreButtonFor(x => x.TestRepeatGroups)
</article>*@


